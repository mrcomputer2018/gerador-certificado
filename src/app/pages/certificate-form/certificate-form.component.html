<form novalidate #form="ngForm">
    <app-page-title
        title="Geração de certificado"
        subtitle="Preencha os dados para gerar um novo certificado."
    />

    <div class="card border border-gray-300 max-w-168 p-8 mx-auto">
        <div class="card-body flex flex-col">
            <h2 class="text-[18px] font-bold text-[#1A2856] mb-5">
                Novo certificado
            </h2>

            <div class="mb-3 flex flex-col gap-2">
                <label for="name" class="text-sm text-[#1A2856]"
                    >Nome completo</label
                >
                <input
                    [(ngModel)]="name"
                    #nameRef="ngModel"
                    maxlength="150"
                    required
                    type="text"
                    id="name"
                    name="name"
                    placeholder="digite o nome do aluno..."
                    class="border border-gray-200 px-3 py-2 h-10 rounded-md text-[16px] text-gray-700 focus:ring-[#3B5AC2]"
                />
                <div>
                    @if (nameRef.invalid && nameRef.touched) {
                        <small class="text-xs text-red-500 flex items-center">
                            <i
                                class="ph ph-[warning-circle] w-4 h-4 inline-block mr-2 text-red-500"
                            ></i>
                           O nome do aluno é obrigatório!!!
                        </small>
                        }
                    @if (nameRef.errors?.["required"]) {
                    <small class="text-xs text-red-500 flex items-center">
                        <i
                            class="ph ph-[warning-circle] w-4 h-4 inline-block mr-2 text-red-500"
                        ></i>
                        O nome do aluno é obrigatório!!!
                    </small>
                    }
                    @if (nameRef.errors?.["maxlength"]) {
                        <small class="text-xs text-red-500 flex items-center">
                            <i
                                class="ph ph-[warning-circle] w-4 h-4 inline-block mr-2 text-red-500"
                            ></i>
                            A atividade deve ter no máximo 150 caracteres!!!
                        </small>
                        }
                </div>
            </div>
            <div class="mb-3 flex flex-row items-end gap-2">
                <div class="flex flex-col flex-1 gap-1 mr-9">
                    <label
                        for="Activity"
                        [ngClass]="{
                            'text-red-500': hasError,
                            'text-[#1A2856] peer-focus:text-[#3B5AC2] transition-colors':
                                !hasError
                        }"
                        >Atividade</label
                    >
                    <input
                        [(ngModel)]="activity"
                        #activityRef="ngModel"
                        maxlength="50"
                        required
                        type="text"
                        id="activity"
                        name="activity"
                        placeholder="digite a atividade exercida..."
                        class="peer border border-gray-200 px-3 py-2 h-10 rounded-md text-[16px] text-gray-700 focus:ring-[#3B5AC2]"
                    />
                    <div>
                         @if (activityRef.invalid && activityRef.touched) {
                        <small class="text-xs text-red-500 flex items-center">
                            <i
                                class="ph ph-[warning-circle] w-4 h-4 inline-block mr-2 text-red-500"
                            ></i>
                            A atividade é obrigatória!!!
                        </small>
                        }

                        @if (activityRef.errors?.["required"]) {
                        <small class="text-xs text-red-500 flex items-center">
                            <i
                                class="ph ph-[warning-circle] w-4 h-4 inline-block mr-2 text-red-500"
                            ></i>
                            A atividade é obrigatória!!!
                        </small>
                        }

                        @if (activityRef.errors?.["maxlength"]) {
                        <small class="text-xs text-red-500 flex items-center">
                            <i
                                class="ph ph-[warning-circle] w-4 h-4 inline-block mr-2 text-red-500"
                            ></i>
                            A atividade deve ter no máximo 50 caracteres!!!
                        </small>
                        }
                    </div>
                </div>
                <div class="w-1/6 flex flex-row justify-end items-center pl-1">
                    <app-secundary-button label="Adicionar" />
                </div>
            </div>

            <div class="mb-8 flex flex-col gap-2">
                <label for="name" class="text-sm text-[#1A2856]"
                    >Lista de atividades</label
                >
                <div class="border border-gray-200 p-4 rounded-lg w-full">
                    @for (item of activityList; track $index) {
                    <div class="flex flex-row justify-between items-center">
                        <span>{{ item }}</span>
                        <i
                            class="ph ph-[x] w-5 h-5 p-1.5 text-red-500 rounded-md hover:bg-gray-300 cursor-pointer"
                        ></i>
                    </div>
                    @if($index + 1 === activityList.length){
                    <div></div>
                    } @else {
                    <hr class="border border-gray-200 my-4" />
                    } }
                </div>
            </div>

            <app-primary-button label="Gerar certificado" />
        </div>
    </div>
</form>
